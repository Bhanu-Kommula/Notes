Why Security Matters
    
    When building software, the first priority is to make it work.
    Next step is to make it stable — handle exceptions, avoid crashes, etc.
    But the most crucial part is security.
    Just like we lock phones with passwords/fingerprints, apps too need protection.
    

Why Is Security Important in Apps?

    Without security:
    Anyone can access anything in your app. 
    E.g., in an e-commerce app: seller should add product, buyer should buy — different roles. 
    You can't let everyone do everything.
    
    Security = login, logout, access control based on roles.
    
Why Is Security Important in Apps?

Without Spring:

    You write your own login forms.
    Manage sessions manually.
    Protect every controller by hand.
    Trust me — building security this way takes 2x more effort than building the app itself.  
    Luckily, we have Spring Security — which solves 90% of this automatically.


OWASP Top 10 – What Are You Securing From?
You don’t need to memorize this, but be aware of OWASP Top 10 — a list of the most common security risks (updated every few years).

Examples:

    SQL Injection
    
    Broken Access Control
    
    Cryptographic Failures

Spring Security is built with these threats in mind.

Let’s Create the Project
Dependencies:

    Dev tools
    spring web
    spring security 
    lombok


Let's have a simple resource that, when accessed it greets ( welcome)

Controller

    package com.myprojects.security.controller;
    
    import org.springframework.web.bind.annotation.GetMapping;
    import org.springframework.web.bind.annotation.RestController;
    
    @RestController
    public class GreetingController {
    	
    	@GetMapping("/home")
    	public String greet() {
    		return "Welcome to Spring Security";
    	}
    
    }

So now lets build security for this resource

So when we add the spring security dependency, it will automatically adds a login page to the application so ( for the above application when we hit http://localhost:8080/home) it will ask for the username and password
as to secure the application. 

    user is the default username 
    Password is given in the console ( autogenerated by Spring security)  and we can logout the application by http://localhost:8080/home/logout using this url. 

    
so we will get a default form to login

Questions: 
    
    1 - how exaclty login page is coming in btw the home page how that is possibile
    2 - session - so when we login, we can access the same page in other new windows multiple times and even if we have multiple controllers even they can be accessed so how session is maintained 
    3 - if we want to check the session id can we do that?
    4 - instead of login form can we do that through postman


Lets see how the login form looks when we are requesting the home page


Here's what’s happening behind the scenes:
    
    Your controller is protected.
    
    Spring Security adds a chain of filters.
    
    One key filter is: UsernamePasswordAuthenticationFilter.
    
    It checks if you're authenticated.
    
    If not, it shows the login page.
    
    If yes, it lets your request go through.
    
    Spring also creates a session for you after login — just like a browser remembering you're logged in.
    

Show Session ID in Response
Want to actually see the session ID?

Modify your controller like this:

      
      @GetMapping("/homepage")
      public String greet(HttpServletRequest request) {
          return request.getSession().getId(); // shows session ID
      }
Every time you refresh → same session ID.
After logout → new session.

**Use Your own Username & Password** 

Tired of copy-pasting that weird generated password?

In application.properties, just set:
     
      spring.security.user.name=Bhanu
      spring.security.user.password=Prasad

**Try the Same with Postman**

By default, if you call your API from Postman, you’ll get 401 Unauthorized.

    To fix that:
    
    Go to Postman → Authorization tab
    
    Select Basic Auth
    
    Enter username & password → Send → ✅ You’re in!

CSRF – **Cross-Site Request Forgery**
Imagine this:

You’re logged into your bank.

You visit a malicious website (maybe to download a cracked movie).

That site uses your browser session to make a fake transfer request on your behalf.

This is CSRF.

Spring Security blocks this by default — especially for POST/PUT/DELETE requests.



So, everytime you send a request to the server, the server should generate a unique token, and you can send that token everytime you want to send the request. that is called CSRF token. 


